import React from 'react'

import { useTheme } from '@mui/material/styles'

interface BetaNXTLogoProps {
  showPoweredBy?: boolean
  logoFill?: string
  height?: number
  alt?: string
  title?: string
  decorative?: boolean
  onClick?: () => void
  href?: string
  tabIndex?: number
  role?: string
}

export function BetaNXTLogo({
  showPoweredBy = true,
  logoFill,
  height = 22,
  alt,
  title,
  decorative = false,
  onClick,
  href,
  tabIndex,
  role = 'img',
}: BetaNXTLogoProps) {
  const theme = useTheme()
  const primaryColor = logoFill || theme.vars.palette.common.white
  const poweredBy = theme.vars.palette.logoPoweredBy

  // Original SVG dimensions and positions
  const originalWidth = 156
  const originalHeight = 22
  const poweredByWidth = 70 // Approximate width of the powered-by text
  const mainLogoWidth = originalWidth - poweredByWidth

  // Calculate viewBox based on whether powered-by is shown
  const viewBoxX = showPoweredBy ? 0 : poweredByWidth
  const viewBoxWidth = showPoweredBy ? originalWidth : mainLogoWidth

  // Calculate scale to maintain aspect ratio
  const scale = height / originalHeight

  // Determine accessibility attributes
  const isInteractive = Boolean(onClick || href)
  const shouldBeHidden = decorative && !isInteractive

  // Default alt text based on what's shown
  const defaultAlt = showPoweredBy ? 'Powered by BetaNXT' : 'BetaNXT'

  const accessibleName = alt || (shouldBeHidden ? undefined : defaultAlt)
  const titleText = title || accessibleName

  // Handle keyboard events for interactive logos
  const handleKeyDown = (event: React.KeyboardEvent) => {
    if (isInteractive && (event.key === 'Enter' || event.key === ' ')) {
      event.preventDefault()
      if (onClick) {
        onClick()
      } else if (href) {
        window.location.href = href
      }
    }
  }

  const svgProps = {
    width: viewBoxWidth * scale,
    height: height,
    viewBox: `${viewBoxX} 0 ${viewBoxWidth} ${originalHeight}`,
    fill: 'none',
    xmlns: 'http://www.w3.org/2000/svg',
    role: shouldBeHidden ? 'presentation' : role,
    'aria-hidden': shouldBeHidden,
    'aria-label': !shouldBeHidden ? accessibleName : undefined,
    tabIndex: isInteractive ? (tabIndex ?? 0) : undefined,
    onClick: onClick,
    onKeyDown: isInteractive ? handleKeyDown : undefined,
    style: {
      cursor: isInteractive ? 'pointer' : undefined,
    },
    // Add focus outline for keyboard navigation
    sx: isInteractive
      ? {
          '&:focus': {
            outline: `2px solid ${theme.palette.primary.main}`,
            outlineOffset: '2px',
            borderRadius: 1,
          },
          '&:focus:not(:focus-visible)': {
            outline: 'none',
          },
        }
      : undefined,
  }

  const logoContent = (
    <svg {...svgProps}>
      {titleText && !shouldBeHidden && <title>{titleText}</title>}
      {showPoweredBy && (
        <path
          className="powered-by"
          d="M4.60742 11.7289H2.38672V10.5629H4.60742C4.99414 10.5629 5.30664 10.5004 5.54492 10.3754C5.7832 10.2504 5.95703 10.0786 6.06641 9.8598C6.17969 9.63715 6.23633 9.38324 6.23633 9.09808C6.23633 8.82855 6.17969 8.5766 6.06641 8.34222C5.95703 8.10394 5.7832 7.91254 5.54492 7.76801C5.30664 7.62347 4.99414 7.55121 4.60742 7.55121H2.83789V14.9106H1.36719V6.37933H4.60742C5.26758 6.37933 5.82812 6.49652 6.28906 6.7309C6.75391 6.96136 7.10742 7.28168 7.34961 7.69183C7.5918 8.09808 7.71289 8.56293 7.71289 9.08636C7.71289 9.63715 7.5918 10.1098 7.34961 10.5043C7.10742 10.8989 6.75391 11.2016 6.28906 11.4125C5.82812 11.6235 5.26758 11.7289 4.60742 11.7289ZM8.64706 11.811V11.6762C8.64706 11.2192 8.71347 10.7953 8.84628 10.4047C8.97909 10.0102 9.1705 9.6684 9.4205 9.37933C9.67441 9.08636 9.983 8.8598 10.3463 8.69965C10.7135 8.53558 11.1275 8.45355 11.5885 8.45355C12.0533 8.45355 12.4674 8.53558 12.8307 8.69965C13.1978 8.8598 13.5084 9.08636 13.7623 9.37933C14.0162 9.6684 14.2096 10.0102 14.3424 10.4047C14.4752 10.7953 14.5416 11.2192 14.5416 11.6762V11.811C14.5416 12.268 14.4752 12.6918 14.3424 13.0825C14.2096 13.4731 14.0162 13.8149 13.7623 14.1078C13.5084 14.3969 13.1998 14.6235 12.8365 14.7875C12.4732 14.9477 12.0611 15.0278 11.6002 15.0278C11.1353 15.0278 10.7193 14.9477 10.3521 14.7875C9.98886 14.6235 9.68027 14.3969 9.42636 14.1078C9.17245 13.8149 8.97909 13.4731 8.84628 13.0825C8.71347 12.6918 8.64706 12.268 8.64706 11.811ZM10.0592 11.6762V11.811C10.0592 12.0961 10.0885 12.3657 10.1471 12.6196C10.2057 12.8735 10.2975 13.0961 10.4225 13.2875C10.5475 13.4789 10.7076 13.6293 10.9029 13.7387C11.0982 13.8481 11.3307 13.9028 11.6002 13.9028C11.8619 13.9028 12.0885 13.8481 12.2799 13.7387C12.4752 13.6293 12.6353 13.4789 12.7603 13.2875C12.8853 13.0961 12.9771 12.8735 13.0357 12.6196C13.0982 12.3657 13.1295 12.0961 13.1295 11.811V11.6762C13.1295 11.395 13.0982 11.1293 13.0357 10.8793C12.9771 10.6254 12.8834 10.4008 12.7545 10.2055C12.6295 10.0102 12.4693 9.85785 12.274 9.74847C12.0826 9.63519 11.8541 9.57855 11.5885 9.57855C11.3228 9.57855 11.0924 9.63519 10.8971 9.74847C10.7057 9.85785 10.5475 10.0102 10.4225 10.2055C10.2975 10.4008 10.2057 10.6254 10.1471 10.8793C10.0885 11.1293 10.0592 11.395 10.0592 11.6762ZM17.5558 13.5043L19.0207 8.57074H19.923L19.6769 10.0473L18.2004 14.9106H17.3918L17.5558 13.5043ZM16.6945 8.57074L17.8371 13.5278L17.9308 14.9106H17.0285L15.3117 8.57074H16.6945ZM21.2941 13.4692L22.4015 8.57074H23.7785L22.0676 14.9106H21.1652L21.2941 13.4692ZM20.0754 8.57074L21.5226 13.4457L21.7043 14.9106H20.8957L19.4015 10.0414L19.1555 8.57074H20.0754ZM27.6424 15.0278C27.1736 15.0278 26.7498 14.9516 26.3709 14.7993C25.9959 14.643 25.6756 14.4262 25.4099 14.1489C25.1482 13.8715 24.947 13.5453 24.8064 13.1703C24.6658 12.7953 24.5955 12.3911 24.5955 11.9575V11.7231C24.5955 11.227 24.6677 10.7778 24.8123 10.3754C24.9568 9.97308 25.158 9.62933 25.4158 9.34418C25.6736 9.05511 25.9783 8.83441 26.3299 8.68207C26.6814 8.52972 27.0623 8.45355 27.4724 8.45355C27.9256 8.45355 28.322 8.52972 28.6619 8.68207C29.0017 8.83441 29.283 9.04926 29.5056 9.3266C29.7322 9.60004 29.9002 9.92621 30.0095 10.3051C30.1228 10.684 30.1795 11.102 30.1795 11.559V12.1625H25.281V11.1489H28.7849V11.0375C28.7771 10.7836 28.7263 10.5453 28.6326 10.3227C28.5427 10.1 28.4041 9.92035 28.2166 9.78363C28.0291 9.64691 27.7791 9.57855 27.4666 9.57855C27.2322 9.57855 27.0232 9.62933 26.8396 9.7309C26.6599 9.82855 26.5095 9.97113 26.3885 10.1586C26.2674 10.3461 26.1736 10.5727 26.1072 10.8383C26.0447 11.1 26.0135 11.395 26.0135 11.7231V11.9575C26.0135 12.2348 26.0506 12.4926 26.1248 12.7309C26.2029 12.9653 26.3162 13.1703 26.4646 13.3461C26.6131 13.5219 26.7927 13.6606 27.0037 13.7621C27.2146 13.8598 27.4549 13.9086 27.7244 13.9086C28.0642 13.9086 28.367 13.8403 28.6326 13.7036C28.8982 13.5668 29.1287 13.3735 29.324 13.1235L30.0681 13.8442C29.9314 14.0434 29.7537 14.2348 29.5349 14.4184C29.3162 14.5981 29.0486 14.7446 28.7322 14.8578C28.4197 14.9711 28.0564 15.0278 27.6424 15.0278ZM32.807 9.77777V14.9106H31.3949V8.57074H32.7425L32.807 9.77777ZM34.7465 8.52972L34.7347 9.84222C34.6488 9.8266 34.555 9.81488 34.4535 9.80707C34.3558 9.79926 34.2582 9.79535 34.1605 9.79535C33.9183 9.79535 33.7054 9.83051 33.5218 9.90082C33.3382 9.96722 33.184 10.0649 33.059 10.1938C32.9379 10.3188 32.8441 10.4711 32.7777 10.6508C32.7113 10.8305 32.6722 11.0317 32.6605 11.2543L32.3382 11.2778C32.3382 10.8793 32.3773 10.5102 32.4554 10.1703C32.5336 9.83051 32.6507 9.53168 32.807 9.27386C32.9672 9.01605 33.1664 8.81488 33.4047 8.67035C33.6468 8.52582 33.9261 8.45355 34.2425 8.45355C34.3285 8.45355 34.4203 8.46136 34.5179 8.47699C34.6195 8.49261 34.6957 8.51019 34.7465 8.52972ZM38.417 15.0278C37.9482 15.0278 37.5244 14.9516 37.1455 14.7993C36.7705 14.643 36.4502 14.4262 36.1845 14.1489C35.9228 13.8715 35.7216 13.5453 35.581 13.1703C35.4404 12.7953 35.3701 12.3911 35.3701 11.9575V11.7231C35.3701 11.227 35.4423 10.7778 35.5869 10.3754C35.7314 9.97308 35.9326 9.62933 36.1904 9.34418C36.4482 9.05511 36.7529 8.83441 37.1045 8.68207C37.456 8.52972 37.8369 8.45355 38.247 8.45355C38.7002 8.45355 39.0966 8.52972 39.4365 8.68207C39.7763 8.83441 40.0576 9.04926 40.2802 9.3266C40.5068 9.60004 40.6748 9.92621 40.7841 10.3051C40.8974 10.684 40.9541 11.102 40.9541 11.559V12.1625H36.0556V11.1489H39.5595V11.0375C39.5517 10.7836 39.5009 10.5453 39.4072 10.3227C39.3173 10.1 39.1787 9.92035 38.9912 9.78363C38.8037 9.64691 38.5537 9.57855 38.2412 9.57855C38.0068 9.57855 37.7978 9.62933 37.6142 9.7309C37.4345 9.82855 37.2841 9.97113 37.163 10.1586C37.042 10.3461 36.9482 10.5727 36.8818 10.8383C36.8193 11.1 36.788 11.395 36.788 11.7231V11.9575C36.788 12.2348 36.8252 12.4926 36.8994 12.7309C36.9775 12.9653 37.0908 13.1703 37.2392 13.3461C37.3877 13.5219 37.5673 13.6606 37.7783 13.7621C37.9892 13.8598 38.2295 13.9086 38.499 13.9086C38.8388 13.9086 39.1416 13.8403 39.4072 13.7036C39.6728 13.5668 39.9033 13.3735 40.0986 13.1235L40.8427 13.8442C40.706 14.0434 40.5283 14.2348 40.3095 14.4184C40.0908 14.5981 39.8232 14.7446 39.5068 14.8578C39.1943 14.9711 38.831 15.0278 38.417 15.0278ZM46.0308 13.5981V5.91058H47.4488V14.9106H46.1656L46.0308 13.5981ZM41.9058 11.811V11.6879C41.9058 11.2075 41.9625 10.77 42.0757 10.3754C42.189 9.97699 42.3531 9.63519 42.5679 9.35004C42.7828 9.06097 43.0445 8.84027 43.3531 8.68793C43.6617 8.53168 44.0093 8.45355 44.396 8.45355C44.7789 8.45355 45.1148 8.52777 45.4039 8.67621C45.6929 8.82465 45.939 9.03754 46.1421 9.31488C46.3453 9.58832 46.5074 9.91644 46.6285 10.2993C46.7496 10.6782 46.8355 11.1 46.8863 11.5649V11.9575C46.8355 12.4106 46.7496 12.8246 46.6285 13.1996C46.5074 13.5746 46.3453 13.8989 46.1421 14.1723C45.939 14.4457 45.691 14.6567 45.398 14.8051C45.1089 14.9536 44.771 15.0278 44.3843 15.0278C44.0015 15.0278 43.6558 14.9477 43.3472 14.7875C43.0425 14.6274 42.7828 14.4028 42.5679 14.1137C42.3531 13.8246 42.189 13.4848 42.0757 13.0942C41.9625 12.6996 41.9058 12.2719 41.9058 11.811ZM43.3179 11.6879V11.811C43.3179 12.1 43.3433 12.3696 43.3941 12.6196C43.4488 12.8696 43.5328 13.0903 43.646 13.2817C43.7593 13.4692 43.9058 13.6176 44.0855 13.727C44.2691 13.8325 44.4878 13.8852 44.7417 13.8852C45.0621 13.8852 45.3257 13.8149 45.5328 13.6743C45.7398 13.5336 45.9019 13.3442 46.0191 13.1059C46.1402 12.8637 46.2222 12.5942 46.2652 12.2973V11.2368C46.2417 11.0063 46.1929 10.7914 46.1187 10.5922C46.0484 10.393 45.9527 10.2192 45.8316 10.0707C45.7105 9.9184 45.5601 9.80121 45.3804 9.71918C45.2046 9.63324 44.9957 9.59027 44.7535 9.59027C44.4957 9.59027 44.2769 9.64496 44.0972 9.75433C43.9175 9.86371 43.7691 10.0141 43.6519 10.2055C43.5386 10.3969 43.4546 10.6196 43.4 10.8735C43.3453 11.1274 43.3179 11.3989 43.3179 11.6879ZM52.1355 5.91058H53.5476V13.5571L53.4128 14.9106H52.1355V5.91058ZM57.6843 11.6821V11.8051C57.6843 12.2739 57.6316 12.7055 57.5261 13.1C57.4245 13.4907 57.2683 13.8305 57.0574 14.1196C56.8503 14.4086 56.5925 14.6332 56.2839 14.7934C55.9792 14.9496 55.6257 15.0278 55.2234 15.0278C54.8288 15.0278 54.4851 14.9536 54.1921 14.8051C53.8992 14.6567 53.6531 14.4457 53.4538 14.1723C53.2585 13.8989 53.1003 13.5727 52.9792 13.1938C52.8581 12.8149 52.7722 12.3969 52.7214 11.9399V11.5473C52.7722 11.0864 52.8581 10.6684 52.9792 10.2934C53.1003 9.91449 53.2585 9.58832 53.4538 9.31488C53.6531 9.03754 53.8972 8.82465 54.1863 8.67621C54.4792 8.52777 54.821 8.45355 55.2117 8.45355C55.6179 8.45355 55.9753 8.53168 56.2839 8.68793C56.5964 8.84418 56.8562 9.06683 57.0632 9.3559C57.2702 9.64105 57.4245 9.9809 57.5261 10.3754C57.6316 10.77 57.6843 11.2055 57.6843 11.6821ZM56.2722 11.8051V11.6821C56.2722 11.3969 56.2488 11.1293 56.2019 10.8793C56.155 10.6254 56.0769 10.4028 55.9675 10.2114C55.862 10.02 55.7175 9.86957 55.5339 9.76019C55.3542 9.64691 55.1296 9.59027 54.8601 9.59027C54.6101 9.59027 54.3952 9.63324 54.2156 9.71918C54.0359 9.80511 53.8855 9.9223 53.7644 10.0707C53.6433 10.2192 53.5476 10.3911 53.4773 10.5864C53.4109 10.7817 53.366 10.9926 53.3425 11.2192V12.2797C53.3777 12.5727 53.4519 12.8422 53.5652 13.0883C53.6824 13.3305 53.8464 13.5258 54.0574 13.6743C54.2683 13.8188 54.5398 13.8911 54.8718 13.8911C55.1335 13.8911 55.3542 13.8383 55.5339 13.7328C55.7136 13.6274 55.8562 13.4809 55.9617 13.2934C56.071 13.102 56.1492 12.8793 56.196 12.6254C56.2468 12.3715 56.2722 12.0981 56.2722 11.8051ZM60.7572 14.2192L62.4798 8.57074H63.9915L61.4486 15.8774C61.39 16.0336 61.3138 16.2036 61.22 16.3871C61.1263 16.5707 61.0033 16.7446 60.8509 16.9086C60.7025 17.0766 60.5169 17.2114 60.2943 17.3129C60.0716 17.4184 59.8021 17.4711 59.4857 17.4711C59.3607 17.4711 59.2396 17.4594 59.1224 17.436C59.0091 17.4164 58.9017 17.395 58.8001 17.3715L58.7943 16.2934C58.8333 16.2973 58.8802 16.3012 58.9349 16.3051C58.9935 16.309 59.0404 16.311 59.0755 16.311C59.3099 16.311 59.5052 16.2817 59.6615 16.2231C59.8177 16.1684 59.9447 16.0786 60.0423 15.9536C60.1439 15.8286 60.2298 15.6606 60.3001 15.4496L60.7572 14.2192ZM59.7845 8.57074L61.2904 13.3168L61.5423 14.8051L60.5638 15.0571L58.2611 8.57074H59.7845Z"
          fill={poweredBy}
        />
      )}

      <path
        d="M84.4577 14.9763C84.4577 17.6643 83.0038 20.1882 80.3158 20.1882H74.5V1.28806H79.7943C82.1535 1.28806 83.6897 3.01583 83.6897 5.95141C83.6897 7.70701 83.0037 9.46261 81.6323 10.1211C83.4703 10.7795 84.4577 13.0559 84.4577 14.9763ZM79.7123 2.98876H76.3106V9.40771H79.9317C81.1662 9.40771 81.8792 7.95383 81.8792 6.08836C81.8792 4.16798 81.0838 2.98876 79.7123 2.98876ZM80.0415 18.4875C81.6873 18.4875 82.6475 16.7868 82.6475 14.8393C82.6475 12.809 81.6598 10.9985 79.9591 10.9985H76.3106V18.4875H80.0415Z"
        fill={primaryColor}
      />
      <path
        d="M96.0907 14.5097H88.0809C88.3003 17.1435 89.5348 18.8442 91.2904 18.8442C92.5523 18.8442 93.677 17.939 94.2805 16.595L95.6245 17.2534C94.7741 19.2558 93.1284 20.5171 91.1805 20.5171C88.3826 20.5171 86.3253 17.802 86.3253 13.7144C86.3253 9.70952 88.3277 7.0486 91.3178 7.0486C94.1981 7.0486 96.1181 9.5176 96.1181 13.7422C96.1181 13.9063 96.0907 14.208 96.0907 14.5097ZM94.39 13.0559C94.3351 10.2309 92.9911 8.72215 91.3453 8.72215C89.5073 8.72215 88.3002 10.4499 88.0809 13.0559H94.39Z"
        fill={primaryColor}
      />
      <path
        d="M102.923 7.37739V8.88616H100.756V20.1881H99.0281V8.88616H97.2996V7.37739H99.0281V2.57716H100.756V7.37746L102.923 7.37739Z"
        fill={primaryColor}
      />
      <path
        d="M112.443 7.3774H114.171V20.1882H112.443V17.966C111.812 19.5298 110.441 20.5171 108.767 20.5171C105.887 20.5171 103.967 17.802 103.967 13.7693C103.967 9.73652 105.887 7.0486 108.767 7.0486C110.441 7.0486 111.812 8.0359 112.443 9.5725V7.3774ZM112.416 13.7963C112.416 10.7795 111.044 8.72215 109.041 8.72215C107.039 8.72215 105.722 10.7246 105.722 13.7693C105.722 16.814 107.039 18.8442 109.041 18.8442C111.044 18.8442 112.416 16.7868 112.416 13.7963Z"
        fill={primaryColor}
      />
      <path
        d="M124.158 1.28806H128.245V20.1882H124.707L121.278 10.313V20.1882H117.218V1.28806H121.003L124.158 10.5049V1.28806Z"
        fill={primaryColor}
      />
      <path
        d="M144.048 20.1882H139.248L136.806 13.7422L134.31 20.1882H129.537L134.42 10.121L129.838 1.28806H134.776L136.779 6.52711L138.836 1.28806H143.719L139.138 10.1482L144.048 20.1882Z"
        fill={primaryColor}
      />
      <path
        d="M155.078 1.28806V4.85423H151.676V20.1882H147.617V4.85423H144.188V1.28806H155.078Z"
        fill={primaryColor}
      />
    </svg>
  )

  // If href is provided, wrap in anchor tag
  if (href && !onClick) {
    return (
      <a
        href={href}
        aria-label={accessibleName}
        style={{
          display: 'inline-flex',
          alignItems: 'center',
          justifyContent: 'center',
          textDecoration: 'none',
          color: 'inherit',
        }}
      >
        {logoContent}
      </a>
    )
  }

  return logoContent
}
