import { Canvas, Meta } from '@storybook/blocks'

<Meta title="Guides/Using the Theme" />

# Using the Theme

The primary way to apply a theme is by using MUI's `ThemeProvider` to wrap your application and `CssBaseline` for consistent styling and built-in color scheme (light/dark mode) support.

**Import your chosen theme and MUI components:**

```jsx
// In your application's root component (e.g., App.tsx, main.tsx)
"use client"; // Or remove if not using Next.js App Router specific features directly here

import { ReactNode } from 'react'

import { CssBaseline, ThemeProvider } from '@mui/material'

// Choose the theme you want to use:
import theme from "[path-to-themes]/baseTheme";
// Or, to use betanxtTheme:
// import theme from "[path-to-themes]/betanxtTheme";

// Your application's root component
export default function App({ children }: { children: ReactNode }) {
  return (
    <ThemeProvider theme={theme}>
      {/* CssBaseline applies baseline styles and enables native browser components in dark mode */}
      <CssBaseline enableColorScheme />
      {children}
    </ThemeProvider>
  )
}
```

**Apply this setup at the root of your application.**
How you do this depends on your framework (e.g., in `index.tsx` for Create React App, or a root layout for other setups).

**For Next.js Applicaitons:**
If you are using Next.js (especially with the App Router), you'll need additional setup for optimal server-side rendering and caching, such as using `@mui/material-nextjs/v15-appRouter`'s `AppRouterCacheProvider`. For detailed instructions, please refer to the official MUI Next.js integration guide: [MUI Next.js Integration](https://mui.com/material-ui/integrations/nextjs/).

## Dark Mode

Both `baseTheme` and `betanxtTheme` support light and dark modes. There are multiple ways to implement dark mode in your application:

### 1. Using the default system preference

```tsx
import betanxtTheme from '[path-to-themes]/betanxtTheme'

import CssBaseline from '@mui/material/CssBaseline'
import { ThemeProvider, createTheme } from '@mui/material/styles'

function App() {
  return (
    <ThemeProvider theme={betanxtTheme}>
      <CssBaseline enableColorScheme />
      {children}
    </ThemeProvider>
  )
}
```

### 2. Setting a specific default mode

To set light or dark as the default mode, use the `defaultMode` prop:

```tsx
<ThemeProvider theme={betanxtTheme} defaultMode="dark">
  <CssBaseline enableColorScheme />
  {children}
</ThemeProvider>
```

### 3. Toggling between modes

To provide users with the ability to switch between modes, use the `useColorScheme` hook:

```jsx
import { Button, CssBaseline, ThemeProvider } from '@mui/material'
import { useColorScheme } from '@mui/material/styles'

function ModeToggle() {
  const { mode, setMode } = useColorScheme()

  return (
    <Button onClick={() => setMode(mode === 'light' ? 'dark' : 'light')}>
      {mode === 'light' ? 'Switch to Dark Mode' : 'Switch to Light Mode'}
    </Button>
  )
}

function App() {
  return (
    <ThemeProvider theme={betanxtTheme}>
      <CssBaseline enableColorScheme />
      <ModeToggle />
      {children}
    </ThemeProvider>
  )
}
```

For more detailed information on implementing dark mode, refer to the [MUI Dark Mode Documentation](https://mui.com/material-ui/customization/dark-mode/).

## Using CSS Variables

The recommended way to access theme values (like colors, spacing, typography) in your components is through the `theme.vars` object. This leverages native CSS variables, offering better performance and automatic responsiveness to theme changes (e.g., light/dark mode).

**Example:**

```jsx
import Box from '@mui/material/Box'

// Example of using theme.vars with the sx prop on an MUI Box component
function MyStyledBox() {
  return (
    <Box
      sx={(theme) => ({
        backgroundColor: theme.vars.palette.primary.main,
        color: theme.vars.palette.primary.contrastText,
        padding: theme.vars.spacing[2], // Accesses 'var(--mui-spacing-2)'
        fontSize: theme.vars.typography.fontSize,
        fontFamily: theme.vars.typography.fontFamily,
        border: `1px solid ${theme.vars.palette.divider}`,
        borderRadius: theme.vars.shape.borderRadius,
        '&:hover': {
          backgroundColor: theme.vars.palette.primary.dark,
        },
      })}
    >
      This Box is styled using theme.vars via the sx prop.
    </Box>
  )
}
```
